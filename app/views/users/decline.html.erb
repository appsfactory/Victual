<% groups = [] %>
<% Group.where("going_out = ?", @user.going_out).each do |group| %>
  <% if group.users.length < 8 %>  
    <% groups.push(group) %>
  <% end %>
<% end %>
<% @groups = groups %>

<%= render @groups %>
